<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sign Up ‚Ä¢ LinkTradeNetwork</title>
<style>
  :root{ --bg:#2d3748; --ink:#0f172a; --line:#e5e7eb; --brand:#6366f1; --brand2:#4f46e5; --card:#fff; --muted:#6b7280; }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Inter,Roboto,Arial}
  header{background:#64748b;padding:18px 14px;border-bottom:1px solid rgba(255,255,255,.08)}
  .brand{max-width:980px;margin:0 auto;display:flex;align-items:center;gap:10px;color:#000;text-decoration:none}
  .brand .logo{font-size:28px}
  .brand b{font-size:28px}
  .wrap{max-width:560px;margin:22px auto;padding:0 12px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;box-shadow:0 12px 40px rgba(0,0,0,.18)}
  .pad{padding:18px}
  .h{margin:0 0 6px 0;font-size:24px;font-weight:800}
  .sub{color:var(--muted);margin-bottom:12px;font-size:14px}
  label{display:block;font-weight:600;margin:8px 0 6px 0;font-size:13px}
  input{width:100%;border:2px solid var(--line);border-radius:10px;padding:.6rem .75rem;font-size:15px}
  input:focus{outline:0;border-color:var(--brand);box-shadow:0 0 0 2px rgba(99,102,241,.2)}
  .check{display:flex;align-items:flex-start;gap:10px;margin-top:8px}
  .check input{width:18px;height:18px;margin-top:2px}
  .check span{color:var(--muted);font-size:.9rem}
  .check a{color:#2563eb;text-decoration:none}
  .check a:hover{text-decoration:underline}
  .btn{width:100%;margin-top:12px;background:#ea6a00;color:#fff;border:none;border-radius:10px;padding:.7rem 1rem;font-weight:800;cursor:pointer}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .msg{display:none;margin-top:10px;border-radius:10px;padding:.65rem .9rem;font-weight:700;text-align:center;font-size:14px}
  .msg.ok{display:block;background:#d1fae5;color:#065f46;border:1px solid #10b981}
  .msg.err{display:block;background:#fee2e2;color:#b91c1c;border:1px solid #ef4444}
  .foot{margin-top:10px;text-align:center;color:var(--muted);font-size:14px}
  .foot a{color:#2563eb;text-decoration:none}
  .foot a:hover{text-decoration:underline}
</style>
</head>
<body>
<header>
  <a class="brand" href="landingpage.html">
    <span class="logo">üåç</span><b>LinkTradeNetwork</b>
  </a>
</header>

<main class="wrap">
  <section class="card">
    <div class="pad">
      <h1 class="h">Create your account</h1>
      <div class="sub">Enter your email to get started</div>

      <form id="form">
        <label for="email">Email address</label>
        <input id="email" type="email" autocomplete="email" required />

        <div class="check">
          <input id="terms" type="checkbox" required />
          <span>I agree to the <a href="terms.html" target="_blank" rel="noopener">Terms & Conditions</a>.</span>
        </div>

        <button id="submit" class="btn" type="submit" disabled>Continue</button>
      </form>

      <div id="msg" class="msg"></div>
      <div class="foot">Already have an account? <a href="index.html">Sign In</a></div>
    </div>
  </section>
</main>

<script>
  const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyGdnl2QSB36asGlyX9voB0iZaQzamojty5HHzvYuBhWmhfsabmf3jsCcR2Lm-udsnl/exec';
  const $ = id => document.getElementById(id);
  const emailEl=$('email'), termsEl=$('terms'), btn=$('submit'), msg=$('msg');

  function updateBtn(){ btn.disabled = !(emailEl.value.trim() && termsEl.checked); }
  emailEl.addEventListener('input', updateBtn);
  termsEl.addEventListener('change', updateBtn);

  function show(type,text){ msg.className='msg '+type; msg.textContent=text; }

  document.getElementById('form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const email = emailEl.value.trim().toLowerCase();
    if(!termsEl.checked){ show('err','Please accept the Terms to continue.'); return; }
    btn.disabled=true; btn.textContent='Creating‚Ä¶'; show('', '');

    try{
      // Create minimal person (name to be added in builder)
      await fetch(GOOGLE_SCRIPT_URL, { method:'POST', body: JSON.stringify({ action:'addPerson', person:{ firstName:'', lastName:'', email } }) });
      localStorage.setItem('linktradeUser', JSON.stringify({ name:'', email, signedInAt:new Date().toISOString() }));
      localStorage.setItem('userProfile:v1', JSON.stringify({ firstName:'', lastName:'', email, headline:'', photo:'' }));

      show('ok','Account created! Redirecting to profile builder‚Ä¶');
      setTimeout(()=> location.href='build-profile.html', 500);
    }catch(err){
      console.error(err); show('err','Could not create account. Please try again.'); btn.disabled=false; btn.textContent='Continue';
    }
  });
</script>
</body>
</html>
